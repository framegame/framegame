webpackJsonp(["loader.directMessagesData"],{"1alW":function(e,t,i){var r=i("kM2E");r(r.S,"Number",{isInteger:i("AKgy")})},"2eO1":function(e,t,i){"use strict";var r=1,n=3,a=4,o=1,u={FILE_TOO_LARGE:2,INTERNAL_ERROR:131,INVALID_MEDIA:1,RATE_LIMIT:88,TIMEOUT:67,UNSUPPORTED_MEDIA:3,ZERO_FILE_LENGTH:4},d={0:u.INTERNAL_ERROR,1:u.INVALID_MEDIA,2:u.FILE_TOO_LARGE,3:u.UNSUPPORTED_MEDIA,4:u.TIMEOUT};e.exports=function(e,t){function i(){c(),N=0,A=null,F={},b=D,U=0,S=0,j=!1,x&&(x.abort(),x=null)}function s(){if(w){z="uploading";var e="&total_bytes="+w+"&media_type="+encodeURIComponent(P);F.extraInitParams&&(e+=F.extraInitParams),M("POST","INIT",e,null,l,h,o)}else h({error:{code:u.ZERO_FILE_LENGTH}})}function l(e){N===r&&(A=e.media_id_string,f(e.expires_after_secs),p())}function c(){G&&(clearTimeout(G),G=null)}function f(e){if(e){c();var t=Math.min(2147483647,1e3*e);G=setTimeout(function(){h({error:{code:u.TIMEOUT}}),R("NONE","timeout"),i()},t)}}function p(){if(S===w)_();else{L=Math.min(b,w-S);var t=e.webkitSlice||e.mozSlice||e.slice,i=t.call(e,S,S+L),r=new FormData;r.append("media",i),M("POST","APPEND","&media_id="+A+"&segment_index="+U,r,E,h,o)}}function E(){N===r&&(U++,S+=L,T(g()),p())}function _(){if(F.pauseBeforeFinalize)N=2;else{j=!0;var e="&media_id="+A;F.trimRanges&&(e+="&trim_ranges="+encodeURIComponent(F.trimRanges)),/^video\//.test(P)&&(e+="&allow_async=true"),C&&(e+="&ttl=infinite"),e+=F.extraFinalizeParams||"",M("POST","FINALIZE",e,null,v,h,o)}}function v(e){f(e.expires_after_secs);var t=e.processing_info,i=0;if(!t)return void m(e);switch(t.state){case"pending":z="waiting";break;case"in_progress":z="processing",i=t.progress_percent;break;case"succeeded":return void m(e);case"failed":var r=t.error||{};return r.code=d[r.code]||u.INTERNAL_ERROR,void h({error:r});default:return void h(e)}T(i,A),setTimeout(I,1e3*t.check_after_secs)}function I(){N===r&&M("GET","STATUS","&media_id="+A,null,v,h,o)}function m(e){N===r&&(N=n,O())}function h(e){N===r&&(y=e&&e.error&&e.error.code?e.error:{code:u.INTERNAL_ERROR},N=a,O())}function g(){return w?100*S/w:0}function T(e,t){N!==a&&F.progress&&F.progress(e,z,t)}function O(){N===n&&F.success&&F.success(A),N===a&&F.error&&F.error(y)}function R(e,t){if(F.stats){var i={mediaType:P,command:e,status:t,duration:new Date-Y,totalByteSize:w,totalDuration:new Date-k};"APPEND"===e&&(i.appendByteSize=L),F.stats(i)}}function M(e,t,i,r,n,a,o){function u(){if(x.status>=200&&x.status<400){var e=f();204===x.status||e?(R(t,"success"),c(),n(e||{})):d("parsererror")}else x.status&&503!==x.status?s():d()}function d(u){o?M(e,t,i,r,n,a,o-1):s(u)}function s(e){R(t,e||"error"),a(f()||{})}function l(){L=D,d("timeout")}function c(){if(r){var e=Math.max(1,new Date-Y);b=Math.max(D,Math.min(5242880,Math.round(2e3*L/e)))}}function f(){try{return JSON.parse(x.responseText)}catch(e){return null}}var p=H+"?command="+t+i;Y=new Date,x=new XMLHttpRequest,x.open(e,p,!0),x.withCredentials=!0,x.timeout=45e3,x.onload=u,x.onerror=d,x.ontimeout=l;for(var E in B)x.setRequestHeader(E,B[E]);r?x.send(r):x.send()}e=e||{},t=t||{};var A=void 0,F=void 0,N=void 0,y=void 0,w=e.size||0,P=e.type,D=Math.max(Math.ceil(w/1e3),65536),S=void 0,L=void 0,b=void 0,U=void 0,G=void 0,x=void 0,z=void 0,j=void 0,Y=void 0,k=new Date,B=t.sruHeaders||{},H=t.uploadUrl||"https://upload.twitter.com/i/media/upload.json",C=!!t.retainMediaForever;i(),this.upload=function(e){e=e||{},(j&&(F.trimRanges!==e.trimRanges||F.extraFinalizeParams!==e.extraFinalizeParams)||F.extraInitParams!==e.extraInitParams)&&i(),F=e,N!==n&&N!==r&&(N=r,j?_():A?p():s()),O(),T(g())},this.cancel=function(){i()},this.pollStatusOfExistingMediaId=function(e,t){A=e,F=t||{},N=r,I()},this.uploadExternalMedia=function(e,t,i,n){function a(e){A=e.media_id_string,I()}F=n||{},N=r,z="uploading";var u="&source_url="+e+"&media_type="+t;u+="&media_category="+i,u+=F.extraInitParams||"",u+=F.extraFinalizeParams||"",M("POST","INIT",u,null,a,F.error,o)}}},"55jw":function(e,t,i){e.exports=i("Yra6")},"6qD9":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GifImagePreviewError=void 0;var r=i("//Fk"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),a=i("Yra6"),o=i("ZEym"),u=t.GifImagePreviewError={FILE_IS_NOT_AN_IMAGE:1,NOT_A_GIF:2,COULD_NOT_GENERATE_PREVIEW:3},d=function(e){if((0,a.isValidImageFile)(e)){if(e.isGif){var t=e.img,i=e.width,r=e.height,d=e.orientation;return(0,o.scaledCanvas)(t,i,r,d).then(function(e){return(0,o.canvasToDataUri)(e)},function(e){var t=Error("Gif preview could not be generated");throw e.code=u.COULD_NOT_GENERATE_PREVIEW,t})}var s=Error("The provided image must be a gif");return s.code=u.INCORRECT_FILE_TYPE,n.default.reject(s)}var l=Error("The provided file is not a valid image");return l.code=u.NOT_A_GIF,n.default.reject(l)};t.default=d},"E/5B":function(e,t,i){e.exports=i("6qD9")},Ozl3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.RESET=void 0;var r=i("nmJ5"),n=t.RESET=(0,r.action)("RESET");t.reset=function(){return{type:n}}},"RRo+":function(e,t,i){e.exports={default:i("c45H"),__esModule:!0}},Yra6:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return[_.EXIF_ORIENTATIONS.LEFT_BOTTOM,_.EXIF_ORIENTATIONS.LEFT_TOP,_.EXIF_ORIENTATIONS.RIGHT_BOTTOM,_.EXIF_ORIENTATIONS.RIGHT_TOP].indexOf(e)>=0}function a(e,t){var i=n(t),r=i?[e.height,e.width]:[e.width,e.height],a=(0,E.default)(r,2);return{width:a[0],height:a[1]}}function o(e){return new f.default(function(t,i){var r=function(e,t){var r=new Error(e);r.code=t,r.type=m.type,i(r)},n=new Image;n.onload=function(){n.width&&n.height?t(n):r("Image lacks height or width",m.NO_DIMENSIONS)},n.onerror=function(){r("Error loading image",m.LOAD_FAILED)},n.src=e})}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidImageFile=t.ImageLoadError=void 0;var u=i("Zrlr"),d=r(u),s=i("wxAW"),l=r(s),c=i("//Fk"),f=r(c),p=i("d7EF"),E=r(p);t.isRotated=n,t.widthAndHeightForOrientation=a,t.loadImage=o;var _=i("YFYo"),v=r(_),I=i("brly"),m=t.ImageLoadError={type:"image-load",NO_DIMENSIONS:1,LOAD_FAILED:2},h=(t.isValidImageFile=function(e){var t=e instanceof h,i=e.isImage||e.isGif,r=e.orientation,n=e.width&&e.height,a=e.img;return!!(t&&i&&r&&n&&a)},function(){function e(t){var i=this;(0,d.default)(this,e),this.fileHandle=t,this.name=t.name,this.size=t.size,this.type=t.type,this.url=window.URL.createObjectURL(this.fileHandle),this.isGif=this.type===I.GIF_TYPE,this.isImage=I.IMAGE_TYPES.some(function(e){return e===i.type})}return(0,l.default)(e,[{key:"withDimensionsAndOrientation",value:function(){var e=this;return this.isGif||this.isImage?o(this.url).then(function(t){var i=function(i){var r=a(t,i),n=r.width,o=r.height;return e.img=t,e.width=n,e.height=o,e.orientation=i,e};return(0,v.default)(e.fileHandle).then(function(e){return i(e===_.EXIF_ORIENTATIONS.UNKNOWN?_.EXIF_ORIENTATIONS.TOP_LEFT:e)},function(){return i(_.EXIF_ORIENTATIONS.TOP_LEFT)})}):f.default.resolve(this)}},{key:"dispose",value:function(){this.url&&window.URL.revokeObjectURL(this.url)}}]),e}());t.default=h},adyp:function(e,t,i){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.maxFileSize,r=void 0===i?p:i,a=t.maxDimension,o=void 0===a?E:a;if((0,s.isValidImageFile)(e)){if(v(e,r,o)){if(e.isGif){var d=Error("Gif exceeds size limit");return d.code=f.GIF_IS_TOO_LARGE,u.default.reject(d)}return n(e,r,o).then(function(e){return(0,c.getBlobFromDataUri)(e)}).catch(function(e){var t=Error("Image exceeds size limit and cannot be resized");throw t.code=f.CANNOT_BE_RESIZED,t})}return u.default.resolve(e.fileHandle)}var l=Error("The provided file is not a valid image");return l.code=f.FILE_IS_NOT_AN_IMAGE,u.default.reject(l)}function n(e,t,i){function r(n,o){return a(e.img,e.width,e.height,n,o,e.orientation).then(function(e){var a=e.width>i||e.height>i,u=e.toDataURL("image/jpeg"),d=u.split(";base64,")[1],s=(0,c.getBase64Size)(d),l=s>t;if(a||l){var f=.8;return a&&(f=n>o?i/n:i/o),r(n*f,o*f)}return u})}return r(e.width,e.height)}function a(e,t,i,r,n,o){var u=t/2,d=i/2;return u<=r&&d<=n?(0,l.scaledCanvas)(e,r,n,o):(0,l.scaledCanvas)(e,u,d,o).then(function(e){return a(e,e.width,e.height,r,n,o)})}Object.defineProperty(t,"__esModule",{value:!0}),t.needsResize=t.needsRotation=t.ResizeError=void 0;var o=i("//Fk"),u=function(e){return e&&e.__esModule?e:{default:e}}(o),d=i("YFYo"),s=i("Yra6"),l=i("ZEym"),c=i("brly");t.default=r;var f=t.ResizeError={GIF_IS_TOO_LARGE:1,CANNOT_BE_RESIZED:2,FILE_IS_NOT_AN_IMAGE:3},p=5242880,E=8192,_=t.needsRotation=function(e){return e.orientation!==d.EXIF_ORIENTATIONS.TOP_LEFT},v=t.needsResize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,r=e.height,n=e.size,a=e.width,o=n>t,u=a>i||r>i;return _(e)||u||o}},brly:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.match(/=*$/);return Math.floor(.75*(e.length-t[0].length))}function a(e){return new s.default(function(t,i){var r=e.split(/data:|;base64,/);if(Blob)if(3!==r.length)i(Error("Invalid dataUri"));else if(atob)if(Uint8Array){for(var n=(0,u.default)(r,3),a=n[1],o=n[2],d=atob(o),s=d.length,l=Array(s),c=0;c<s;c++)l[c]=d.charCodeAt(c);t(new Blob([new Uint8Array(l)],{type:a}))}else i(Error("The Uint8Array type is not available"));else i(Error("The atob API is not available"));else i(Error("The Blob API is not available"))})}Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO_TYPES=t.GIF_TYPE=t.IMAGE_TYPES=void 0;var o=i("d7EF"),u=r(o),d=i("//Fk"),s=r(d);t.getBase64Size=n,t.getBlobFromDataUri=a;t.IMAGE_TYPES=["image/jpeg","image/png","image/webp"],t.GIF_TYPE="image/gif",t.VIDEO_TYPES=["video/mp4","video/quicktime"]},c45H:function(e,t,i){i("1alW"),e.exports=i("FeBl").Number.isInteger},fuOh:function(e,t,i){e.exports=i("adyp")},hviW:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments[1];switch(t.type){case A:return e.concat(t.payload);case y:var i=t.payload;return i&&i.length?e.filter(function(e){return-1===i.indexOf(e.id)}):e;case P:var r=t.payload;return e.map(function(e){return e.id===r.id?(0,f.default)({},e,r):e});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadMedia=t.updateMediaUpload=t.updateMedia=t.removeMediaUpload=t.removeMedia=t.resizeMedia=t.addMediaUpload=t.addMedia=t.selectMediaUploadProgress=t.selectMedia=void 0;var a=i("//Fk"),o=r(a),u=i("d7EF"),d=r(u),s=i("bOdI"),l=r(s),c=i("Dd8w"),f=r(c);t.default=n;var p=i("2KeS"),E=i("55jw"),_=r(E),v=i("ipg4"),I=r(v),m=i("2eO1"),h=r(m),g=i("fuOh"),T=r(g),O=function(e){return"rweb/mediaUpload/"+e},R=[];I.default.register((0,l.default)({},"mediaUpload",n));var M=t.selectMedia=function(e,t){var i=Array.isArray(t)?t:[t];return e.mediaUpload.filter(function(e){return i.some(function(t){return t===e.id})})},A=(t.selectMediaUploadProgress=function(e,t){var i=M(e,t);return i.length?i.reduce(function(e,t){return e+t.uploadProgress},0)/i.length:0},O("ADD_MEDIA")),F=t.addMedia=function(e){return{payload:e,type:A}},N=0,y=(t.addMediaUpload=function(e,t,i){return function(r){var n=Array.isArray(e)?e:[e],a=n.map(function(e){var r=L(e,t,i),n=(0,g.needsRotation)(e),a=(0,g.needsResize)(e,r),o=a?null:new h.default(e.fileHandle);return{id:N++,imageFile:e,needsResize:a,needsRotation:n,uploader:o,uploadFailed:!1,uploadId:"",uploading:!1,uploadProgress:0}});return r(F(a)),a}},t.resizeMedia=function(e,t,i){return function(r,n){var a=M(n(),e),u=(0,d.default)(a,1),s=u[0];if(!s)return o.default.reject(new Error("media item not found"));var l=s.imageFile,c=L(l,t,i),f=c?{maxFileSize:c}:{};return(0,T.default)(l,f).then(function(e){return new _.default(e).withDimensionsAndOrientation()},function(e){throw e.type="resize",e}).then(function(e){r(S({id:s.id,imageFile:e,needsResize:!1,needsRotation:!1,uploader:new h.default(e.fileHandle)}))})}},O("REMOVE_MEDIA")),w=t.removeMedia=function(e){return{payload:Array.isArray(e)?e:[e],type:y}},P=(t.removeMediaUpload=function(e){return function(t,i){M(i(),e).forEach(function(e){var t=e.imageFile,i=e.uploader;i&&i.cancel&&i.cancel(),t&&t.dispose&&t.dispose()}),t(w(e))}},O("UPDATE_MEDIA")),D=t.updateMedia=function(e){return{payload:e,type:P}},S=t.updateMediaUpload=function(e){return function(t,i){t(D(e));var r=M(i(),e.id);return(0,d.default)(r,1)[0]}},L=(t.uploadMedia=function(e){return function(t,i){var r=M(i(),e),n=(0,p.bindActionCreators)(S,t),a=r.map(function(e){var t=e.id;if(e.uploadPromise)return e.uploadPromise;if(!e.uploader)return o.default.reject(new Error("Media has no uploader. Did you forget to call resizeMedia?"));var i=new o.default(function(i,r){e.uploader.upload({success:function(e){i(n({id:t,uploadId:e,uploadProgress:100,uploading:!1}))},progress:function(e){n({id:t,uploadProgress:e})},error:function(i){var a=i.code;n({id:t,uploadProgress:0,uploading:!1,uploadFailed:!0});var o=new Error("Media upload failed");o.code=a,o.type="upload",o.isGif=e.imageFile.isGif,o.isImage=e.imageFile.isImage,r(o)}})});return n({id:t,uploading:!0,uploadFailed:!1,uploadProgress:0,uploadPromise:i}),i});return o.default.all(a).catch(function(e){throw e.type||(e.type="upload"),e})}},function(e,t,i){return e.isImage&&i||e.isGif&&t})},nrX7:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i("fZjL"),a=r(n),o=i("bOdI"),u=r(o);t.default=function(e,t){var i=t instanceof Array?t.reduce(function(e,t){return e[t]=!0,e},{}):(0,u.default)({},t,!0);return(0,a.default)(e).reduce(function(t,r){return i.hasOwnProperty(r)||(t[r]=e[r]),t},{})}}});
//# sourceMappingURL=loader.directMessagesData.051165fb8610d40b.js.map