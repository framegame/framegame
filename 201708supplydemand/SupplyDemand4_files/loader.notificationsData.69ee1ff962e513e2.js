webpackJsonp(["loader.notificationsData"],{JSXd:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n("bOdI"),a=i(r),u=n("Dd8w"),o=i(u),c=n("d39v"),s=i(c),l=n("bXqX"),d=i(l),f=n("bndy"),_=n("vNPR"),p=n("KCLT"),m=i(p),T=n("qDka"),v=i(T),h=n("rHto"),A=i(h),E=n("Dica"),g=i(E),I=n("sLaq"),F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.default)({id:t},e)},N=function(t,e){var n=t[e],i=n.retweeted_status||e;return i===e?n:t[i]},O=function(t,e,n,i){return/_REQUEST$/.test(e.type)?(0,o.default)({},t,{entities:(0,o.default)({},t.entities,(0,a.default)({},n.id_str,(0,o.default)({},n,i(n))))}):t},y=function(t,e,n){var i=e.meta.entityId,r=N(t.entities,i);return O(t,e,r,n)},S=function(t,e,n){return O(t,e,t.entities[e.meta.entityId],n)},w={like:{reducer:function(t,e){return y(t,e,function(t){return{favorited:!0,favorite_count:t.favorite_count+1}})},getParams:F,getApiMethod:function(t){return t.Tweets.like},context:I.ACTION_LIKE,canPerformAction:function(t){return!t.favorited},succeedIfError:s.default.DuplicateFavorite},unlike:{reducer:function(t,e){return y(t,e,function(t){return{favorited:!1,favorite_count:t.favorite_count-1}})},getParams:F,getApiMethod:function(t){return t.Tweets.unlike},context:I.ACTION_UNLIKE},retweet:{reducer:function(t,e){return y(t,e,function(t){return{retweeted:!0,retweet_count:t.retweet_count+1}})},getParams:F,getApiMethod:function(t){return t.Tweets.retweet},context:I.ACTION_RETWEET,canPerformAction:function(t,e){return!N(e.entities,t.id_str).retweeted},succeedIfError:s.default.AlreadyRetweeted},unretweet:{reducer:function(t,e){return y(t,e,function(t){return{retweeted:!1,retweet_count:t.retweet_count-1}})},getParams:F,getApiMethod:function(t){return t.Tweets.unretweet},context:I.ACTION_UNRETWEET,canPerformAction:function(t,e){return N(e.entities,t.id_str).retweeted}},mute:{reducer:function(t,e){return S(t,e,function(t){return{conversation_muted:!0}})},getParams:F,getApiMethod:function(t){return t.Tweets.mute},context:I.ACTION_MUTE_TWEET},unmute:{reducer:function(t,e){return S(t,e,function(t){return{conversation_muted:!1}})},getParams:F,getApiMethod:function(t){return t.Tweets.unmute},context:I.ACTION_UNMUTE_TWEET},delete:{reducer:function(t,e){return S(t,e,function(t){return{isDeleted:!0}})},getParams:F,getApiMethod:function(t){return t.Tweets.destroy},context:I.ACTION_DELETE_TWEET}},C=(0,m.default)({namespace:"tweets",fetchOneEndpoint:function(t){return t.Tweets.show},fetchOneContext:I.FETCH_TWEET,fetchManyEndpoint:function(t){return t.Tweets.fetch},fetchManyContext:I.FETCH_TWEETS,customActions:w}),L=function(t){return t.permalink="/"+(t.user&&t.user.screen_name||"i")+"/status/"+t.id_str,t},R=function t(e,n,i,r){var a=(0,_.denormalize)(e[r],A.default,{cards:n,tweets:e,users:i});if(a&&(a=L(a),a.retweeted_status&&(a.retweeted_status=t(e,n,i,a.retweeted_status.id_str),a.permalink=a.retweeted_status.permalink),a.quoted_status=a.quoted_status&&t(e,n,i,a.quoted_status.id_str),a.extended_entities&&a.extended_entities.media)){var u=(a.extended_entities.media||[]).map(function(t,e){var n="video"===t.type?"video":"photo";return(0,o.default)({},t,{expanded_url:a.permalink+"/"+n+"/"+(e+1)})});a.extended_entities=(0,o.default)({},a.extended_entities,{media:u})}return a};C.selectHydrated=(0,f.createSelector)(C.selectAll,d.default.selectAll,g.default.selectAll,function(t,e){return e},R),C.createHydratedSelector=(0,f.createSelector)(C.selectAll,d.default.selectAll,g.default.selectAll,function(t,e,n){return function(i){return R(t,e,n,i)}}),C.createHydratorForTweet=function(t){return(0,f.createSelector)(C.selectAll,d.default.selectAll,g.default.selectAll,function(e,n,i){return R(e,n,i,t)})},e.default=v.default.register(C)},TT5e:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case g.REQUEST:return(0,l.default)({},t,{fetchStatus:p.default.LOADING});case g.FAILURE:return(0,l.default)({},t,{fetchStatus:p.default.FAILED});case g.SUCCESS:return(0,l.default)({},t,{notificationFilters:e.payload,fetchStatus:p.default.LOADED});case I.REQUEST:return(0,l.default)({},t,{notificationFilters:(0,l.default)({},t.notificationFilters,(0,c.default)({},e.meta.filterName,!0))});case F.REQUEST:return(0,l.default)({},t,{notificationFilters:(0,l.default)({},t.notificationFilters,(0,c.default)({},e.meta.filterName,!1))});default:return t}}Object.defineProperty(e,"__esModule",{value:!0}),e.disableNotificationFilter=e.enableNotificationFilter=e.fetchNotificationFilters=e.fetchNotificationFiltersIfNeeded=e.selectFetchStatus=e.selectNotificationFilters=void 0;var a=n("//Fk"),u=i(a),o=n("bOdI"),c=i(o),s=n("Dd8w"),l=i(s);e.default=r;var d=n("IIth"),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(d),_=n("zAiL"),p=i(_),m=n("ipg4"),T=i(m),v=n("sLaq"),h=i(v),A="rweb/notificationFilters",E="rweb.notificationFilters",g=f.createApiActionTypes(A,"FETCH_NOTIFICATION_FILTERS"),I=f.createApiActionTypes(A,"ENABLE_NOTIFICATION_FILTER"),F=f.createApiActionTypes(A,"DISABLE_NOTIFICATION_FILTER"),N={fetchStatus:p.default.NONE,notificationFilters:{}};T.default.register((0,c.default)({},"notificationFilters",r));var O=e.selectNotificationFilters=function(t){return t.notificationFilters.notificationFilters},y=e.selectFetchStatus=function(t){return t.notificationFilters.fetchStatus},S=(e.fetchNotificationFiltersIfNeeded=function(){return function(t,e,n){var i=(n.api,n.persistence);return y(e())===p.default.LOADED?u.default.resolve():i.get(E,24e4).then(function(e){return t(e?{payload:e,type:g.SUCCESS}:S())})}},e.fetchNotificationFilters=function(){return function(t,e,n){var i=n.api,r=n.persistence;return f.createApiDispatcher(t,{apiErrorHandler:h.default,request:i.Settings.fetchNotificationFilters})({actionTypes:g,context:v.FETCH_NOTIFICATION_FILTERS}).then(function(t){return r.set(E,O(e())),t})}});e.enableNotificationFilter=function(t){return function(e,n,i){var r=i.api,a=i.persistence;return f.createOptimisticApiDispatcher(e,{apiErrorHandler:h.default,params:(0,c.default)({},t,!0),request:r.Settings.updateNotificationFilters})({actionTypes:I,context:v.ACTION_ENABLE_NOTIFICATION_FILTER,meta:{filterName:t}}).then(function(t){return a.set(E,O(n())),t})}},e.disableNotificationFilter=function(t){return function(e,n,i){var r=i.api,a=i.persistence;return f.createOptimisticApiDispatcher(e,{apiErrorHandler:h.default,params:(0,c.default)({},t,!1),request:r.Settings.updateNotificationFilters})({actionTypes:F,context:v.ACTION_DISABLE_NOTIFICATION_FILTER,meta:{filterName:t}}).then(function(t){return a.set(E,O(n())),t})}}},XEmH:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatTimeline=e.formatRichTimeline=e.getUpdatedTimelineCursors=e.mergeChronologicalTimelines=e.mergeTimelines=e.mergeRichTimelines=e.getUpdatedRichTimelineCursor=e.getChronologicalFetchDirection=e.getFetchDirection=e.FETCH_TOP=e.FETCH_BOTTOM=e.action=e.NAMESPACE=e.GLOBAL_STATE_KEY=void 0;var r=n("bOdI"),a=i(r),u=n("Gu7T"),o=i(u),c=n("Dd8w"),s=i(c),l=n("fZjL"),d=i(l),f=n("HF4g"),_=i(f),p=n("JpTO"),m=i(p),T=n("lyoc"),v=i(T),h=e.GLOBAL_STATE_KEY="timelines",A=e.NAMESPACE="rweb/"+h,E=(e.action=function(t){return A+"/"+t},e.FETCH_BOTTOM="bottom"),g=e.FETCH_TOP="top",I={down_cursor:E,max_id:E,max_position:E,min_position:g,since_id:g,up_cursor:g},F={down_cursor:g,max_id:g,next_cursor:E,since_id:E,up_cursor:E},N=(e.getFetchDirection=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,n=(0,d.default)(I),i=(0,d.default)(t).filter(function(t){return-1!==n.indexOf(t)});return I[i]||e},e.getChronologicalFetchDirection=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,n=(0,d.default)(F),i=(0,d.default)(t).filter(function(t){return-1!==n.indexOf(t)});return F[i]||e},function(t,e){var n=(0,_.default)(t,function(t){return e.sort_index===t.sort_index});n>-1&&t.splice(n,1);var i=t.reduce(function(t,e){return e.conversation?t.concat(e.entity_id.ids):t},[]),r=(0,s.default)({},e);if(r.conversation)r=(0,s.default)({},r,{conversation:(0,s.default)({},r.conversation,{ids:r.conversation.ids.filter(function(t){return-1===i.indexOf(t)})})}),t=t.filter(function(t){return!!t.conversation||-1===r.conversation.ids.indexOf(t.entity_id.ids[0])});else if(r.entity_id&&-1!==i.indexOf(r.entity_id.ids[0]))return t;return t.push(r),t}),O=(e.getUpdatedRichTimelineCursor=function(t,e){var n,i=(0,T.normalize)(t[E],e[E]).sort(),r=t[E]?i[0]:e[E],u=(0,T.normalize)(t[g],e[g]).sort(),c=u[1];return n={},(0,a.default)(n,E,r),(0,a.default)(n,g,c),(0,a.default)(n,"gaps",(0,m.default)([].concat((0,o.default)(t.gaps),(0,o.default)(e.gaps||[])))),n},e.mergeRichTimelines=function(t,e){return[].concat((0,o.default)(e)).sort(function(t,e){return(0,v.default)(t.sort_index,e.sort_index)}).reduce(N,[].concat((0,o.default)(t))).sort(function(t,e){return(0,v.default)(e.sort_index,t.sort_index)})},e.mergeTimelines=function(t,e){return(0,m.default)([].concat((0,o.default)(t),(0,o.default)(e))).sort(function(t,e){return(0,v.default)(e,t)})},e.mergeChronologicalTimelines=function(t,e){return(0,m.default)([].concat((0,o.default)(t),(0,o.default)(e))).sort(function(t,e){return(0,v.default)(t,e)})},e.getUpdatedTimelineCursors=function(t){var e,n=t.length?t[0]:"",i=t.length?t[t.length-1]:"";return e={},(0,a.default)(e,E,i),(0,a.default)(e,g,n),(0,a.default)(e,"gaps",[]),e},[]);e.formatRichTimeline=function(t){return t?t.map(function(t){if(t.tweet){var e={tweetId:t.tweet.id,promotedContent:t.tweet.promotedContent,sort_index:t.sort_index};return t.tweet.tweet_display_size&&(e.tweetDisplaySize=t.tweet.tweet_display_size),{data:e,type:"tweet"}}return t.conversation?{data:t,type:"conversation"}:{data:t}}):O},e.formatTimeline=function(t){return t?t.map(function(t){return{data:{tweetId:t},type:"tweet"}}):O}},bXqX:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.customActions=void 0;var r,a=n("d7EF"),u=i(a),o=n("W3Iv"),c=i(o),s=n("mvHQ"),l=i(s),d=n("bOdI"),f=i(d),_=n("Dd8w"),p=i(_),m=n("/FRN"),T=n("bndy"),v=n("KCLT"),h=i(v),A=n("qDka"),E=i(A),g=n("cxPT"),I=i(g),F=n("DpdG"),N=e.customActions={vote:{reducer:function(t,e){if(e.type===O.customActionTypes.vote.REQUEST){var n=e.meta,i=n.entityId,r=n.selectedIndex,a=t.entities[i],u="choice"+r+"_count",o=(0,F.getBindingValue)(a.binding_values,u),c=parseInt(o,10),s=isFinite(c)?c:0;return(0,p.default)({},t,{entities:(0,p.default)({},t.entities,(0,f.default)({},i,(0,p.default)({},a,{binding_values:(0,p.default)({},a.binding_values,(0,f.default)({selected_choice:r},u,""+(s+1)))})))})}return t},getParams:function(t,e,n){(0,I.default)(e.tweetId,"tweetId is required to vote on a poll card");var i=O.select(n(),t);return{data:{"twitter:string:card_uri":t,"twitter:long:original_tweet_id":e.tweetId,"twitter:string:response_card_name":i.name,"twitter:string:cards_platform":m.API_CARDS_PLATFORM,"twitter:string:selected_choice":e.selectedIndex},path:"/v2/capi/"+(0,F.getBindingValue)(i.binding_values,"api")}},getApiMethod:function(t){return t.Cards.post},getMeta:function(t,e){return{selectedIndex:e.selectedIndex}}},createPoll:{reducer:function(t,e){return t},getParams:function(t,e){var n=e.choices,i=e.durationMinutes;(0,I.default)(n&&n.length>=2&&n.length<=4,"2 to 4 choices are required for a poll");var r={"twitter:card":"poll"+n.length+"choice_text_only","twitter:api:api:endpoint":"1"};return i&&(r["twitter:long:duration_minutes"]=i),n.forEach(function(t,e){r["twitter:string:choice"+(e+1)+"_label"]=t}),{data:{card_data:(0,l.default)(r)},path:"/v2/cards/create.json"}},getApiMethod:function(t){return t.Cards.post}}},O=(0,h.default)({namespace:"cards",customActions:N}),y=(r={},(0,f.default)(r,F.CardType.AUDIO,function(t){var e=(t.artist_name,t.card_url),n=t.partner,i=t.player_image,r=t.player_image_small,a=t.title;return!!(e&&(r||i)&&n&&a)}),(0,f.default)(r,F.CardType.MOMENT,function(t){var e=t.title,n=t.url;return!(!e||!n)}),(0,f.default)(r,F.CardType.PLAYER,function(t){var e=t.card_url,n=t.domain,i=t.player_image,r=t.player_image_small,a=t.title;return!!(e&&n&&(r||i)&&a)}),(0,f.default)(r,F.CardType.POLL,function(){return!0}),(0,f.default)(r,F.CardType.PROMO_IMAGE_APP,function(t){var e=t.card_url,n=t.promor_image_large,i=t.promor_image_small,r=t.promo_image,a=t.title;return!!(e&&(r||i||n)&&a)}),(0,f.default)(r,F.CardType.PROMO_WEBSITE,function(t){var e=t.card_url,n=t.player_image,i=t.player_image_small,r=t.promo_image,a=t.title,u=t.vanity_url;return!!(e&&(r||i||n)&&a&&u)}),(0,f.default)(r,F.CardType.SUMMARY,function(t){var e=t.card_url,n=t.event_title,i=t.title;return!(!e||!i&&!n)}),(0,f.default)(r,F.CardType.SUMMARY_LARGE_IMAGE,function(t){var e=t.card_url,n=t.domain,i=t.event_subtitle,r=t.event_thumbnail,a=t.event_thumbnail_small,u=t.event_title,o=t.host_name,c=t.summary_photo_image,s=t.summary_photo_image_small,l=t.thumbnail,d=t.thumbnail_small,f=t.title,_=t.vanity_url;return!!(e&&(a||r||s||d||c||l)&&(u||f)&&(_||n||o||i))}),r),S=function(t,e){return t in y&&y[t](e)};O.selectAll=(0,T.createSelector)(O.selectAll,function(t){return(0,c.default)(t||{}).reduce(function(t,e){var n=(0,u.default)(e,2),i=n[0],r=n[1],a=(0,F.getCardType)(r.name);return S(a,r.binding_values)&&(t[i]=r),t},{})}),e.default=E.default.register(O)},fxEW:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=void 0;switch(e.type){case j.REQUEST:return(0,m.default)({},t,{fetchStatus:(0,m.default)({},t.fetchStatus,(0,v.default)({},e.meta.direction,q.default.LOADING))});case j.FAILURE:return(0,m.default)({},t,{fetchStatus:(0,m.default)({},t.fetchStatus,(0,v.default)({},e.meta.direction,q.default.FAILED))});case j.SUCCESS:var r,u=e.meta.lastPreviousFetchTimestamp,o=(0,m.default)({},t,{fetchStatus:(0,m.default)({},t.fetchStatus,(0,v.default)({},e.meta.direction,q.default.LOADED)),lastPreviousFetchTimestamp:u||t.lastPreviousFetchTimestamp}),c=(0,_.default)(e.payload.entities.notifications||{});if(!c.length){var s=e.meta.direction===H.FETCH_BOTTOM;return(0,m.default)({},o,{cursor:(0,m.default)({},t.cursor,{bottom:s?"0":t.cursor.bottom,next:s?"0":t.cursor.next})})}var l=e.meta.since_id?c.filter(function(t){return t.max_position>e.meta.since_id}):c;n=ot(t.notifications.concat(l)).sort(ct).map(a(t.lastReadTimestamp));var d=parseInt(n[n.length-1].max_position,10),f=parseInt(n[0].max_position,10);return(0,m.default)({},o,{cursor:(r={},(0,v.default)(r,H.FETCH_BOTTOM,d.toString()),(0,v.default)(r,H.FETCH_TOP,f.toString()),(0,v.default)(r,"next",(d-1).toString()),(0,v.default)(r,"previous",(f+1).toString()),r),notifications:n});case it:case W.SUCCESS:return i=parseInt(e.payload.cursor||e.payload.timestamp,10),n=t.notifications.map(a(i)),(0,m.default)({},t,{lastReadTimestamp:i,notifications:n});case X.REQUEST:return i=parseInt(e.meta.cursor,10),(0,m.default)({},t,{lastReadTimestamp:i});case ut:return(0,m.default)({},t,{notifications:t.notifications.map(a(t.lastReadTimestamp))});default:return t}}function a(t){return function(e){var n=parseInt(e.max_position,10),i=!!t&&n>t;return(0,m.default)({},e,{unread:i})}}Object.defineProperty(e,"__esModule",{value:!0}),e.clearUnreadFlags=e.updateLastRead=e.cacheLastReadTimestamp=e.loadCachedLastReadTimestamp=e.initLastReadTimestamp=e.INIT_LAST_READ_TIMESTAMP=e.fetchLastReadTimestamp=e.fetchPreviousNotifications=e.fetchNextNotifications=e.fetchNotificationsIfNeeded=e.fetchNotifications=e.selectLastPreviousFetchTimestamp=e.selectAllHydrated=e.selectUpdateCount=e.selectNotificationById=e.selectNotifications=e.selectLastReadTimestamp=e.selectIsLoadingBottom=e.selectIsLoadingTop=e.selectFetchStatus=e.selectCursor=void 0;var u,o,c=n("//Fk"),s=i(c),l=n("+6Bu"),d=i(l),f=n("gRE1"),_=i(f),p=n("Dd8w"),m=i(p),T=n("bOdI"),v=i(T),h=n("IIth"),A=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(h),E=n("bTdA"),g=n("bXqX"),I=i(g),F=n("bndy"),N=n("vNPR"),O=n("g25S"),y=i(O),S=n("3J12"),w=i(S),C=n("ipg4"),L=i(C),R=n("JSXd"),P=i(R),x=n("Dica"),D=i(x),M=n("sLaq"),b=i(M),H=n("XEmH"),U=n("TT5e"),B=n("zAiL"),q=i(B),k="rweb/notifications",G=function(t){return k+"/"+t},j=A.createApiActionTypes(k,"FETCH"),W=A.createApiActionTypes(k,"FETCH_LAST_READ"),X=A.createApiActionTypes(k,"UPDATE_LAST_READ"),z={cursor:(u={},(0,v.default)(u,H.FETCH_BOTTOM,""),(0,v.default)(u,H.FETCH_TOP,""),(0,v.default)(u,"next",""),(0,v.default)(u,"previous",""),u),fetchStatus:(o={},(0,v.default)(o,H.FETCH_BOTTOM,q.default.NONE),(0,v.default)(o,H.FETCH_TOP,q.default.NONE),o),lastPreviousFetchTimestamp:null,lastReadTimestamp:null,notifications:[]};L.default.register({notifications:r}),e.default=r;var K=(e.selectCursor=function(t){return t.notifications.cursor},e.selectFetchStatus=function(t){var e=t.notifications.fetchStatus;return(0,B.selectInitialFetchStatus)(e,Y(t).length>0)},e.selectIsLoadingTop=function(t){return t.notifications.fetchStatus[H.FETCH_TOP]===q.default.LOADING}),Q=e.selectIsLoadingBottom=function(t){return t.notifications.fetchStatus[H.FETCH_BOTTOM]===q.default.LOADING},J=e.selectLastReadTimestamp=function(t){return t.notifications.lastReadTimestamp},Y=e.selectNotifications=function(t){return t.notifications.notifications},V=(e.selectNotificationById=function(t,e){return Y(t).find(function(t){return t.max_position===e})},e.selectUpdateCount=function(t){return Y(t).reduce(function(e,n){return n.unread&&n.max_position>J(t)?e+1:e},0)},e.selectAllHydrated=(0,F.createSelector)([Y,I.default.selectAll,D.default.selectAll,y.default.selectAll,P.default.selectAll],function(t,e,n,i,r){return(0,N.denormalize)(t,[w.default],{cards:e,lists:i,tweets:r,users:n})}),e.selectLastPreviousFetchTimestamp=function(t){return t.notifications.lastPreviousFetchTimestamp}),Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n,i){var r=i.api,a=(0,H.getFetchDirection)(t),u=t.lastPreviousFetchTimestamp,o=(0,d.default)(t,["lastPreviousFetchTimestamp"]),c=A.createApiDispatcher(e,{apiErrorHandler:b.default,params:o,request:r.Notifications.fetch}),s=function(t){if(t)return[(0,E.addEntities)(t.entities)]};return c({actionTypes:j,context:M.FETCH_NOTIFICATIONS,meta:{direction:a,lastPreviousFetchTimestamp:u,since_id:t.since_id}},s)}},$=function(t){return function(e,n){return e((0,U.fetchNotificationFiltersIfNeeded)()).then(function(){var i=(0,U.selectNotificationFilters)(n()),r=i.filter_not_following,a=r?"following":"unfiltered";return e(Z((0,m.default)({},t,{filters:a})))})}},tt=e.fetchNotifications=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n,i){i.api;return e($(t))}},et=(e.fetchNotificationsIfNeeded=function(t){return function(e,n){return Y(n()).length?s.default.resolve():e(tt(t))}},e.fetchNextNotifications=function(t){return function(e,n){var i=n(),r=Q(i),a=i.notifications.cursor.next||void 0;return"0"===a||r?s.default.resolve():e(tt((0,m.default)({},t,{max_id:a})))}},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onlyIfStale,n=void 0!==e&&e,i=t.now,r=void 0===i?Date.now():i,a=(0,d.default)(t,["onlyIfStale","now"]);return function(t,e){var i=e();if(K(i)||n&&nt(i,r))return s.default.resolve();var u=i.notifications.cursor.previous||void 0;return t(tt((0,m.default)({},a,{since_id:u,lastPreviousFetchTimestamp:r})))}});e.fetchPreviousNotifications=et;var nt=function(t,e){var n=V(t);return n&&e-n<3e4},it=(e.fetchLastReadTimestamp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n,i){var r=i.api;return A.createApiDispatcher(e,{apiErrorHandler:b.default,params:t,request:r.Notifications.fetchLastRead})({actionTypes:W,context:M.FETCH_NOTIFICATION_LAST_READ}).then(function(){return e(at())})}},e.INIT_LAST_READ_TIMESTAMP=G("INIT_LAST_READ_TIMESTAMP")),rt=e.initLastReadTimestamp=function(t){return{payload:{timestamp:t},type:it}},at=(e.loadCachedLastReadTimestamp=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){var i=n.persistence,r=function(){return!!J(e())};return r()?s.default.resolve():i.get("rweb.notifications",6048e5).then(function(e){if(e&&!r()){var n=e.lastReadTimestamp;t(rt(n))}})}},e.cacheLastReadTimestamp=function(){return function(t,e,n){var i=n.persistence,r=J(e());return r?i.set("rweb.notifications",{lastReadTimestamp:r}):s.default.resolve()}}),ut=(e.updateLastRead=function(){return function(t,e,n){var i=n.api,r=Date.now();return A.createOptimisticApiDispatcher(t,{apiErrorHandler:b.default,params:{cursor:r},request:i.Notifications.updateLastRead})({actionTypes:X,context:M.APP_UPDATE_NOTIFICATION_LAST_READ,meta:{cursor:r}}).then(function(){return t(at())})}},G("CLEAR_UNREAD_FLAGS")),ot=(e.clearUnreadFlags=function(){return{type:ut}},function(t){var e=t.reduce(function(t,e){var n=e.min_position+"-"+e.action,i=t.hasOwnProperty(n)&&t[n];return(!i||ct(e,i)<0)&&(t[n]=e),t},{});return(0,_.default)(e)}),ct=function(t,e){return e.max_position-t.max_position}},g25S:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n("gRE1"),a=i(r),u=n("+6Bu"),o=i(u),c=n("Dd8w"),s=i(c),l=n("sLaq"),d=n("/6Pf"),f=i(d),_=n("bndy"),p=n("KCLT"),m=i(p),T=n("qDka"),v=i(T),h=n("cxPT"),A=i(h),E={addToList:{reducer:function(t,e){return t},getParams:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)({},e)},getApiMethod:function(t){return t.Lists.addToList},context:l.ACTION_ADD_LIST_MEMBER,canPerformAction:function(t){return t.member_count<5e3}}},g=(0,m.default)({namespace:"lists",fetchOneEndpoint:function(t){return t.Lists.fetchList},fetchOneParams:function(t,e){var n=e.screenName,i=e.slug,r=e.listId,a=(0,o.default)(e,["screenName","slug","listId"]);return(0,A.default)(r||n&&i,"listId or screenName and slug required to fetch list "+t),(0,s.default)({slug:i,owner_screen_name:n,list_id:r},a)},customActions:E});g.selectListById=(0,_.createSelector)(g.selectAll,function(t,e){return e},function(t,e){return t?(0,a.default)(t).find(function(t){return t.id_str===e}):void 0}),g.selectListKeyById=(0,_.createSelector)(g.selectListById,function(t){return t&&(0,f.default)(t.full_name.split("/")[0].substr(1),t.slug)}),g.selectListScreenNameById=(0,_.createSelector)(g.selectListById,function(t){return t&&t.full_name.split("/")[0].substr(1)}),e.default=v.default.register(g)}});
//# sourceMappingURL=loader.notificationsData.69ee1ff962e513e2.js.map